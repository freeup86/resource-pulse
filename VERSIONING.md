# Automatic Versioning System

ResourcePulse includes an automatic versioning system that increments the version number after every git commit.

## How It Works

The versioning system uses a git post-commit hook that:

1. **Automatically increments** the patch version (semver: major.minor.patch) after every commit
2. **Updates package.json files** for both frontend and backend with the new version
3. **Generates version.json** with detailed version information including:
   - Version number
   - Build number (total commit count)
   - Commit hash (full and short)
   - Commit date and message
   - Build timestamp

## Files Created/Modified

### Backend Files
- `resource-pulse-backend/services/versionService.js` - Version service for Node.js
- `resource-pulse-backend/routes/versionRoutes.js` - API endpoints for version info
- `resource-pulse-backend/server.js` - Updated to include version routes

### Frontend Files
- `src/services/versionService.js` - Version service for React
- `src/components/common/VersionInfo.jsx` - Version display component
- `src/components/layout/Header.jsx` - Updated to show version in header

### Configuration Files
- `.git/hooks/post-commit` - Git hook that handles automatic versioning
- `version.json` - Version information file (auto-generated)
- `public/version.json` - Copy for frontend access (auto-generated)

## API Endpoints

### GET /api/version
Returns complete version information:
```json
{
  "success": true,
  "data": {
    "version": "0.1.1",
    "buildNumber": "70",
    "commitHash": "e9b698f534107f681bce9b50c80e89471dd0167e",
    "commitHashShort": "e9b698f",
    "commitDate": "2025-05-21 12:10:53",
    "commitMessage": "Add automatic versioning system",
    "buildDate": "2025-05-21 12:10:53"
  }
}
```

### GET /api/version/string
Returns simplified version string:
```json
{
  "success": true,
  "version": "v0.1.1 (Build 70)"
}
```

## Frontend Usage

The version information is displayed in the application header. Users can click on the version text to see detailed version information in a modal.

### Using the Version Service
```javascript
import versionService from './services/versionService';

// Get current version
const version = versionService.getVersion(); // "0.1.1"

// Get detailed version info
const info = versionService.getFullVersionInfo();

// Get formatted version string
const versionString = versionService.getVersionString(); // "v0.1.1 (Build 70)"
```

## Backend Usage

```javascript
const versionService = require('./services/versionService');

// Get current version
const version = versionService.getVersion();

// Get detailed version info
const info = versionService.getFullVersionInfo();
```

## Version Strategy

- **Major version**: Manual updates for breaking changes
- **Minor version**: Manual updates for new features
- **Patch version**: Automatic increment on every commit

## Manual Version Updates

To manually update major or minor versions:

1. Edit `package.json` in both root and `resource-pulse-backend/` directories
2. Update the version field (e.g., change "0.1.1" to "0.2.0" for minor, or "1.0.0" for major)
3. Commit the changes - the patch number will start incrementing from the new base

## Development vs Production

- In development: Version service falls back to package.json version if version.json is not available
- In production: Version information is always generated by the git hook
- The system works seamlessly in both environments

## Benefits

1. **Automatic tracking**: Every change is automatically versioned
2. **Deployment visibility**: Easy to identify which version is deployed
3. **Debugging support**: Quickly identify the exact commit for any deployment
4. **User transparency**: Users can see current version and build information
5. **No manual intervention**: Developers don't need to remember to update versions

## Troubleshooting

If versioning is not working:

1. Ensure the post-commit hook is executable: `chmod +x .git/hooks/post-commit`
2. Check that git is properly configured
3. Verify package.json files exist in expected locations
4. Check console for any version service errors